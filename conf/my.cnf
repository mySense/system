# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.


[mysql]
#ssl-ca=/home/mysql/3306/mysql/data/ca.pem
#ssl-cert=/home/mysql/3306/mysql/data/client-cert.pem
#ssl-key=/home/mysql/3306/mysql/data/client-key.pem

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
explicit_defaults_for_timestamp=true
disable-partition-engine-check
character-set-server = utf8
lower_case_table_names = 1
skip-slave-start
skip_name_resolve
max_connections = 8000
interactive_timeout = 600
wait_timeout=86400
open_files_limit = 65535
innodb_open_files = 65535


log_timestamps=SYSTEM
log-output = FILE
expire_logs_days = 7
slow-query-log

general-log

slow_launch_time = 2
long_query_time = 10

gtid-mode=ON
enforce-gtid-consistency
log-bin = mysql-bin
log-bin-index = mysql-bin
binlog-format = ROW
log_slave_updates
sync_binlog = 1
relay-log = relay-bin
relay-log-index = relay-bin.index
binlog_cache_size = 16M
replicate-ignore-db=xxx

join_buffer_size = 128M
sort_buffer_size = 2M
read_rnd_buffer_size = 2M 
thread_cache_size = 1000
table_open_cache = 8192
tmp_table_size = 256M

transaction-isolation = READ-COMMITTED

innodb_log_buffer_size = 1G
innodb_log_file_size = 16G
innodb_log_files_in_group = 3
innodb_autoinc_lock_mode = 2
innodb_flush_log_at_trx_commit = 1
innodb_read_io_threads = 32
innodb_write_io_threads = 32
innodb_thread_concurrency = 256
innodb_commit_concurrency = 256
innodb_io_capacity=2000
innodb_max_dirty_pages_pct=15
port = 3306
server_id = 6900
basedir = /home/mysql/3306/mysql
datadir = /home/mysql/3306/mysql/data
socket = /home/mysql/3306/mysql/data/mysql.sock
pid-file = /home/mysql/3306/mysql/data/mysql.pid
tmpdir = /home/mysql/3306/mysql/tmp
ssl-ca = /home/mysql/3306/mysql/data/ca.pem
ssl-cert = /home/mysql/3306/mysql/data/server-cert.pem
ssl-key = /home/mysql/3306/mysql/data/server-key.pem
log-error = /home/mysql/3306/mysql/logs/error.log
general_log_file = /home/mysql/3306/mysql/logs/general.log
slow_query_log_file = /home/mysql/3306/mysql/logs/slow.log
innodb_buffer_pool_size = 128G
